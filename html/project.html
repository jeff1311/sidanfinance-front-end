<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>项目管理</title>
    <link rel="stylesheet" href="/css/project.css">
</head>
<body>

    <div class="layui-row">
        <div class="layui-col-md3 mr-1">
            <input type="text" autocomplete="off" class="layui-input" placeholder="项目名称" id="account">
        </div>
        <div class="layui-col-md2">
            <button class="layui-btn" id="submit">查询</button>
        </div>
    </div>

    <table id="table" lay-filter="test"></table>

</body>
<script src="/layui/layui.js"></script>
<script type="text/html" id="actBar">
    <a class="layui-btn layui-btn-xs" href="https://www.baidu.com">明细</a>
    <!-- <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a> -->
</script>
<script>
    layui.use(['form','table'], function(){

        var form = layui.form;
        var table = layui.table;

        table.render({
            elem: '#table',
            height: 750,
            // url: 'http://192.168.0.103:8888/sidan/finance/project/list', //数据接口
            url: 'http://192.168.6.237:8888/sidan/finance/project/list', //数据接口
            page: true, //开启分页
            cols: [
                [//表头
                    {field: 'name', title: '项目名称', width:200},
                    {field: 'no', title: '项目编号', width:110, sort: true},
                    // {field: 'contractNo', title: '合同编号', width:110, sort: true},
                    {field: 'a', title: '甲方名称', width:195},
                    {field: 'b', title: '甲方集团名称', width: 195},
                    {field: 'contractSignDate', title: '合同签订时间', width: 130, sort: true, templet:'<div>{{ layui.util.toDateString(d.contractSignDate, "yyyy-MM-dd") }}</div>'},
                    {field: 'startDate', title: '项目开工时间', width: 130, sort: true, templet:'<div>{{ layui.util.toDateString(d.startDate, "yyyy-MM-dd") }}</div>'},
                    {field: 'endDate', title: '项目竣工时间', width: 130, sort: true, templet:'<div>{{ layui.util.toDateString(d.endDate, "yyyy-MM-dd") }}</div>'},
                    {field: 'months', title: '历时（月）', width: 110, sort: true},
                    {field: 'totalPrice', title: '合同总价', width: 110, sort: true},
                    {fixed: 'right', title:'成本', toolbar: '#actBar', width:89}
                ]   
            ]
        });
      
        //监听事件
        table.on('toolbar(test)', function(obj){
            console.log(obj);
            var checkStatus = table.checkStatus(obj.config.id);
            switch(obj.event){
                case 'add':
                layer.msg('添加');
                break;
                case 'delete':
                layer.msg('删除');
                break;
                case 'update':
                layer.msg('编辑');
                break;
            };
        });

    //   //监听提交
    //   form.on('submit(formDemo)', function(data){
    //     layer.msg(JSON.stringify(data.field));
    //     return false;
    //   });
    });
</script>
</html>
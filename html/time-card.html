<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>考勤卡</title>
    <link rel="stylesheet" href="/css/time-card.css">
</head>
<body>
    <div class="layui-card">
        <div class="layui-card-header name">张三 - 水电工 - 项目名称</div>
    </div>
    <div class="layui-card">
        <div class="layui-card-header">2019年</div>
        <div class="layui-card-body">
            <table class="layui-table calendar-table">
                <colgroup>
                  <col width="100">
                  <col width="100">
                  <col width="100">
                  <col width="100">
                  <col width="100">
                  <col width="100">
                  <col width="100">
                  <col width="100">
                  <col width="100">
                  <col width="100">
                  <col width="100">
                  <col width="100">
                  <col width="100">
                  <col width="100">
                </colgroup>
                <thead>
                  <tr>
                    <th>考勤</th>
                    <th date="2019-01">1月</th>
                    <th date="2019-02">2月</th>
                    <th date="2019-03">3月</th>
                    <th date="2019-04">4月</th>
                    <th date="2019-05">5月</th>
                    <th date="2019-06">6月</th>
                    <th date="2019-07">7月</th>
                    <th date="2019-08">8月</th>
                    <th date="2019-09">9月</th>
                    <th date="2019-10">10月</th>
                    <th date="2019-11">11月</th>
                    <th date="2019-12">12月</th>
                    <th>合计</th>
                  </tr> 
                </thead>
                <tbody>
                  <tr>
                    <td>工日</td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                  </tr>
                  <tr>
                    <td>工时</td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                    <td><input type="number" class="layui-disabled" readonly="readonly"></td>
                  </tr>
                  <tr>
                    <td>工价</td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>支款</td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>应发工资</td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td></td>
                  </tr>
                  <tr>
                    <td>实发工资</td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td><input type="number"></td>
                    <td></td>
                  </tr>
                </tbody>
            </table>
        </div>
    </div>

    


  

</body>
<script type="text/html" id="calendar-month">
  <table class="layui-table">
    <thead>
      <tr>
        <th>星期日</th>
        <th>星期一</th>
        <th>星期二</th>
        <th>星期三</th>
        <th>星期四</th>
        <th>星期五</th>
        <th>星期六</th>
      </tr> 
    </thead>
    <tbody id="days">
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
    </tbody>
  </table>
</script>
<script src="/js/config.js"></script>
<script src="/js/jquery-3.4.1.min.js"></script>
<script src="/layui/layui.js"></script>
<script>

  layui.use('layer', function(){

    var layer = layui.layer; 



    $('.calendar-table thead th').on('click',function(e){
      var date = $(this).attr('date');
      if(date != undefined){
        console.log(date);
        $.ajax({
          url: baseUrl + '/sidan/finance/attendance/calendar',
          type: 'get',
          data: {
            year: date.split('-')[0],
            month: date.split('-')[1]
          },
          dataType: 'json',
          success: function(json){
            console.log(json);
            if(json.code == 0){

              layer.open({
                type: 1,
                title: '2020-03',
                shadeClose: true,
                shade: false,
                resize: false,
                area: ['700px', '500px'],
                content: $('#calendar-month').text()
              });

              var days = json.calendar;
              var index = 0;
              $('#days td').each(function(i){
                console.log(i % 7);
                var remainder = i % 7;
                var dayOfWeek;
                if(remainder == 0){
                  dayOfWeek = '星期日';
                }else if(remainder == 1){
                  dayOfWeek = '星期一';
                }else if(remainder == 2){
                  dayOfWeek = '星期二';
                }else if(remainder == 3){
                  dayOfWeek = '星期三';
                }else if(remainder == 4){
                  dayOfWeek = '星期四';
                }else if(remainder == 5){
                  dayOfWeek = '星期五';
                }else if(remainder == 6){
                  dayOfWeek = '星期六';
                } 
                if(index < days.length && days[index].dayOfWeek == dayOfWeek){
                  console.log(dayOfWeek);
                  console.log(days[index].dayOfWeek);
                  // console.log(index);
                  $(this).text(days[index].dd);
                  index ++;
                }else{
                  $(this).text('');
                }
              });
            }else{
              console.log(josn.msg);
            }
          }
        })
      }
    });
  });


</script>
</html>